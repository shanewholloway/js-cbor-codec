import {CBOREncoderBasic, basic_tag_encoders, _bind_encoder_context} from '../encode_common/index.jsy'
import {ctx_encode_sync} from './ctx.jsy'

export * from './ctx.jsy'


export class CBOREncoder extends CBOREncoderBasic ::
  _bind_u8ctx(stream) ::
    let encode = _bind_encoder_context @
      stream, this._ctx_encode || ctx_encode_sync
    return encode.rebind(this)

CBOREncoder.with_encoders(basic_tag_encoders)
